\documentclass[12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{cmbright}
\usepackage{lmodern}
\usepackage{geometry}
\usepackage{tikz}
\usetikzlibrary{positioning,calc,math,arrows.meta,decorations.markings}
\usepackage{hyperref}
\usepackage[bf,sf,pagestyles]{titlesec}
\usepackage{titling}
\usepackage[runin]{abstract}
\usepackage[font={footnotesize, sf}, labelfont=bf]{caption} 
\usepackage{siunitx}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{amsmath,amssymb}
\usepackage[catalan,sort]{cleveref}
\usepackage{enumitem}

\geometry{
	a4paper,
	right = 2.5cm,
	left = 2.5cm,
	bottom = 3cm,
	top = 3cm
}

\newcommand{\sfbright}{\fontfamily{cmbr}\selectfont}
\renewcommand{\familydefault}{\rmdefault}
\renewcommand{\sfdefault}{cmbr}

\hypersetup{
	colorlinks,
	linkcolor = {red!50!blue},
	citecolor = {red!50!blue},
	linktoc = page
}

\numberwithin{table}{section}
\numberwithin{figure}{section}
\numberwithin{equation}{section}

\graphicspath{{./figs/}}

% Unitats
\sisetup{
	inter-unit-product = \ensuremath{ \, },
	allow-number-unit-breaks = true,
	math-celsius = {}^{\circ}\kern-\scriptspace C,
	detect-family = true,
	list-final-separator = { y },
	list-pair-separator = { y },
	list-units = single,
	separate-uncertainty = true
}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Ry}{\mathit{Ry}}
\newcommand{\conv}[2]{\filldraw[fill = white!50!-red, fill opacity = 0.5, draw = -red!] (#1,0) ellipse [x radius = 0.1, y radius = #2]}
\newcommand{\data}[3]{\SI{#1 \pm #2}{#3}}
\newcommand{\unc}[2]{\ensuremath{{}\pm \SI{#1}{#2}}}
\DeclareMathOperator{\gr}{gr}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\inn}[2]{\left\langle #1 , #2 \right\rangle}
\newcommand{\parbreak}{
	\begin{center}
		--- $\ast$ ---
	\end{center} 
}
\makeatletter
\newcommand*{\defeq}{\mathrel{\rlap{%
			\raisebox{0.3ex}{$\m@th\cdot$}}%
		\raisebox{-0.3ex}{$\m@th\cdot$}}%
	=
}
\makeatother

\newpagestyle{pagina}{
	\headrule
	\sethead*{\sffamily \bfseries Práctica 3}{}{\theauthor}
	\footrule
	\setfoot*{}{}{\sffamily \thepage}
}
\renewpagestyle{plain}{
	\footrule
	\setfoot*{}{}{\sffamily \thepage}
}
\pagestyle{pagina}

\title{\sffamily {\bfseries Práctica 2:} Óptica geométrica. Sistemas ópticos }
\author{\sffamily B2 2: Arnau Mas, Alejandro Plaza}
\date{\sffamily 6 de junio de 2019}

\begin{document}
\maketitle
\renewcommand{\abstractname}{\bfseries Resumen:}
\begin{abstract}
	Hola hola
\end{abstract}

\section{Introducción y objetivos}

\begin{figure}[htb]
	\centering \footnotesize \sffamily 
	\newcommand{\setcoords}{
		\coordinate (focus) at (5,0);
		\coordinate (obj) at (1,0);
		\coordinate (ocu) at (8,0);
	}
	\begin{tikzpicture}
		% Definim les posicions de les lents
		\tikzmath{
			\xoc = 8;
			\yoc = 2;
			\xob = 1;
			\yob = 2;
		}
		\setcoords

		% Eix òptic
		\draw[dashdotted, color = gray] (0,0) -- (12,0);

		\setcoords
		\tikzset{raig/.style = {
				color = red!30!white,
				decoration = {markings, mark = between positions 0.25 and 0.75 step 0.25 with {\arrow{>}}},
				postaction = decorate
		}};
		\draw[raig] (obj) ++ (0,-\yob) -- (ocu |- 10,1.5) -- (10,1.5) ;
		\draw[raig] (obj) ++ (0,\yob) -- (ocu |- 10,-1.5) -- (10,-1.5) ;


		% Objectiu
		\conv{\xob}{\yob};
		\draw[-|, thick, color = olive] (\xob,\yob + 0.5) -- (\xob,\yob);
		\draw[-|, thick, color = olive] (\xob,-\yob - 0.5) -- (\xob,-\yob);
		\node [above,gray] at (\xob,\yob + 0.5) {Objetivo};
		\node [below, olive, align = center] at (\xob,-\yob - 0.5) {DO\\PE};

		% Ocular
		\conv{\xoc}{\yoc};
		\draw[-|, thick, color = olive] (\xoc,\yoc + 0.5) -- (\xoc,\yoc);
		\draw[-|, thick, color = olive] (\xoc,-\yoc - 0.5) -- (\xoc,-\yoc);
		\node [above,gray] at (\xoc,\yoc + 0.5) {Ocular};
		\node [below, olive, align = center] at (\xoc,-\yoc - 0.5) {DC\\LS};

		% Distàncies
		\tikzset{dist/.style = {arrows = {[ line width = 0pt 1.5]}, color = gray, thin}};
		\begin{scope}[yshift = 20pt]
			\setcoords
			\draw[color = gray, thin, densely dashed] (obj) -- ++(0,-20pt);
			\draw[|<->|, dist] (obj) -- node [above] {\( d = \data{53}{3}{cm} \)} (ocu);
			\draw[color = gray, thin, densely dashed] (ocu) -- ++(0,-20pt);
		\end{scope}
		\begin{scope}[yshift = -20pt]
			\setcoords
			\draw[|<->|, dist] (obj) -- node [below] {\( f'_{\text{obj}} = \SI{50}{cm} \)} (focus);
			\draw[<->|, dist] (focus) -- node [below] {\( f_{\text{oc}} = \SI{50}{cm} \)} (ocu);
			\draw[<->|, dist] (ocu) -- node [below] {\( l = \SI{3.7}{cm} \)} +(2,0);
			\draw[color = gray, thin, densely dashed] (focus) -- ++(0,20pt);
		\end{scope}
		\begin{scope}[xshift = 2.2cm]
			\setcoords
			\draw[|<->|, dist] (ocu) ++ (0,1.5) -- node [below, rotate = 90] {\( \Phi_{\text{PS}} = \SI{4}{mm} \)} +(0,-3);
		\end{scope}
		\begin{scope}[xshift = -0.2cm]
			\setcoords
			\draw[|<->|, dist] (obj) ++ (0,2) -- node [above, rotate = 90] {\( \Phi_{\text{PE}} = \SI{4.3}{cm} \)} +(0,-4);
		\end{scope}
		\begin{scope}[xshift = 3.2cm]
			\setcoords
			\draw[|<->|, dist] (ocu) ++ (0,1.75) -- node [below, rotate = 90] {\( \Phi_{\text{Ull}} = \SI{6}{mm} \)} +(0,-3.5);
		\end{scope}

		% Pupil·la de sortida
		\begin{scope}[xshift = 2cm]
			\setcoords
			\draw[-|, densely dashed, thick, opacity = 0.7, color = olive] (ocu) ++ (0,2) -- +(0,-0.5);
			\draw[-|, densely dashed, thick, opacity = 0.7, color = olive] (ocu) [yscale = -1] ++ (0,2) node[below, olive, opacity = 1] {PS} -- +(0,-0.5);
		\end{scope}

		% Finestra d'entrada
		\draw[olive, <-] (-0.5, 2) -- node [above] {LE} (0.5,2);

		% Ull
		\begin{scope}[xshift = 3cm]
			\setcoords
			\draw[-|, thick, color = olive] (ocu) ++ (0,2.25) node[above, gray] {Ojo} -- +(0,-0.5);
			\draw[-|, thick, color = olive] (ocu) [yscale = -1] ++ (0,2.25) -- +(0,-0.5);
		\end{scope}


	\end{tikzpicture}
	\caption{Diagrama del telescopio astronómico}
	\label{fig:telescopio astronómico}
\end{figure}

\begin{figure}[htb]
	\centering \footnotesize \sffamily 
	\newcommand{\setcoords}{
		\coordinate (focus) at (5,0);
		\coordinate (obj) at (1,0);
		\ (ocu) at (8,0);
		\coordinate (ocu) at (8,0);
	}
	\begin{tikzpicture}
		\tikzmath{
			\xoc = 8;
			\yoc = 2;
			\xob = 1;
			\yob = 2;
		}

		% Eix òptic
		\draw[dashdotted, color = gray] (0,0) -- (12,0);

		\tikzset{raig/.style = {
				color = red!30!white,
				decoration = {markings, mark = between positions 0.25 and 0.75 step 0.25 with {\arrow{>}}},
				postaction = decorate
		}};
		\draw[raig] (\xob, \yob) -- (\xoc, \yoc);

		% Objectiu
		\conv{\xob}{\yob};
		\draw[-|, thick, color = olive] (\xob,\yob + 0.5) -- (\xob,\yob);
		\draw[-|, thick, color = olive] (\xob,-\yob - 0.5) -- (\xob,-\yob);
		\node [above,gray] at (\xob,\yob + 0.5) {Objetivo};
		\node [below, olive, align = center] at (\xob,-\yob - 0.5) {DO\\PE};

		% Ocular
		\filldraw[fill = white!50!-red, fill opacity = 0.5, draw = -red!] (\xoc + 0.15,2) arc [start angle = 90, end angle = 270, x radius = 0.1, y radius = 2 ] -- ++(-0.3,0) arc [start angle = 270, end angle = 90, x radius = -0.1, y radius = 2 ] -- cycle;
		\draw[-|, thick, color = olive] (\xoc,\yoc + 0.5) -- (\xoc,\yoc);
		\draw[-|, thick, color = olive] (\xoc,-\yoc - 0.5) -- (\xoc,-\yoc);
		\node [above,gray] at (\xoc,\yoc + 0.5) {Ocular};
		\node [below, olive, align = center] at (\xoc,-\yoc - 0.5) {DC\\LS};

		% Pupil·la de sortida
		\begin{scope}[xshift = -1cm]
			\draw[-|, densely dashed, thick, opacity = 0.7, color = olive] (\xoc, 0) ++ (0,1.5) -- +(0,-0.5);
			\draw[-|, densely dashed, thick, opacity = 0.7, color = olive] (\xoc, 0) [yscale = -1] ++ (0,1.5) node[below, olive, opacity = 1] {PS} -- +(0,-0.5);
		\end{scope}


	\end{tikzpicture}

	\caption{Diagrama del telescopio de Galileo sin ojo}
	\label{fig:telescopio galileo}
\end{figure}


\end{document}
